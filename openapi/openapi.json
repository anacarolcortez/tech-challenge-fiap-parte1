{"openapi":"3.1.0","info":{"title":"Cadastro de Usuários","description":"Tech Challenge 1 do curso de Pós-Tech Arquitetura Java, da FIAP. Serviço consiste em cadastro de usuários em aplicativo fictício de restaurantes","license":{"name":"Apache 2.0","url":"https://github.com/anacarolcortez/tech-challenge-fiap-parte1"},"version":"1.0"},"servers":[{"url":"http://localhost:8080","description":"Generated server url"}],"paths":{"/users/{id}":{"get":{"tags":["users-controller"],"summary":"Busca","description":"Retorna os dados de um usuário, pesquisado por ID","operationId":"getById","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"409":{"description":"Conflict","content":{"*/*":{"schema":{"type":"object"}}}},"404":{"description":"NOT FOUND","content":{}},"400":{"description":"Bad Request","content":{"*/*":{"schema":{"type":"object"}}}},"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UsersResponseDTO"}}}}},"security":[{"bearerAuth":[]}]},"put":{"tags":["users-controller"],"summary":"Atualiza","description":"Atualiza os dados cadastrais de um usuario, pesquisado por ID.","operationId":"updateUser","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateUserDTO"}}},"required":true},"responses":{"409":{"description":"Conflict","content":{"*/*":{"schema":{"type":"object"}}}},"404":{"description":"User not found","content":{}},"400":{"description":"Invalid input data","content":{"application/json":{"schema":{"type":"string","example":{"timestamp":"2025-05-31T15:00:00Z","status":400,"errors":["User field 'email' must be a valid email address","User must have at least one address"]}}}}},"200":{"description":"User updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UsersResponseDTO"}}}},"500":{"description":"Internal server error"}},"security":[{"bearerAuth":[]}]},"patch":{"tags":["users-controller"],"summary":"Ativa/Inativa usuário","description":"Ativa ou inativa um usuário com base no valor da query param activate.","operationId":"toggleActivation","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"activate","in":"query","required":true,"schema":{"type":"boolean"}}],"responses":{"409":{"description":"Conflict","content":{"*/*":{"schema":{"type":"object"}}}},"404":{"description":"User not found","content":{}},"400":{"description":"Invalid UUID or parameter","content":{}},"200":{"description":"User activated / User deactivated","content":{"text/plain":{"schema":{"type":"string"}}}},"500":{"description":"Internal server error"}},"security":[{"bearerAuth":[]}]}},"/users":{"get":{"tags":["users-controller"],"summary":"Lista usuários","description":"Retorna uma lista paginada de usuários","operationId":"findAllUsers","parameters":[{"name":"size","in":"query","required":true,"schema":{"type":"integer","format":"int32"}},{"name":"page","in":"query","required":true,"schema":{"type":"integer","format":"int32"}}],"responses":{"409":{"description":"Conflict","content":{"*/*":{"schema":{"type":"object"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"object"}}}}},"400":{"description":"Bad Request","content":{"*/*":{"schema":{"type":"object"}}}},"200":{"description":"Lista de usuários","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UsersResponseDTO"}}}}}},"security":[{"bearerAuth":[]}]},"post":{"tags":["users-controller"],"summary":"Cadastro","description":"Registra um novo usuário e retorna dados cadastrais com um token JWT","operationId":"create","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UsersRequestDTO"}}},"required":true},"responses":{"409":{"description":"Conflict","content":{"*/*":{"schema":{"type":"object"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"object"}}}}},"400":{"description":"Invalid input data","content":{"application/json":{"schema":{"type":"string","example":{"timestamp":"2025-05-31T15:00:00Z","status":400,"errors":["User field 'email' must be a valid email address","User must have at least one Address"]}}}}},"200":{"description":"User created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateUserDTO"}}}},"500":{"description":"Internal server error"}}}},"/users/login":{"post":{"tags":["users-controller"],"summary":"Login","description":"Realiza a autenticação de um usuário no sistema e retorna um token JWT.","operationId":"executeLogin","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthenticationDataDTO"}}},"required":true},"responses":{"409":{"description":"Conflict","content":{"*/*":{"schema":{"type":"object"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"object"}}}}},"400":{"description":"Invalid input data","content":{"application/json":{"schema":{"type":"string","example":{"timestamp":"2025-05-31T15:00:00Z","status":400,"errors":["Field 'login' must not be blank","Field 'password' must not be blank"]}}}}},"200":{"description":"Authentication successful","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenJWTInfoDTO"}}}},"401":{"description":"Authentication failed","content":{"application/json":{"schema":{"type":"string","example":{"timestamp":"2025-05-31T15:00:00Z","status":401,"error":"Unauthorized","message":"Invalid login or password"}}}}},"500":{"description":"Internal server error"}}}},"/users/{id}/password":{"patch":{"tags":["users-controller"],"summary":"Altera senha","description":"Realiza a alteração da senha de um usuário.","operationId":"changePassword","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChangePasswordRequestDTO"}}},"required":true},"responses":{"409":{"description":"Conflict","content":{"*/*":{"schema":{"type":"object"}}}},"404":{"description":"User not found","content":{}},"400":{"description":"Invalid input data","content":{"application/json":{"schema":{"type":"string","example":{"timestamp":"2025-05-31T15:00:00Z","status":400,"errors":["Field 'oldPassword' is required","Field 'newPassword' is required"]}}}}},"200":{"description":"Password updated successfully!","content":{"text/plain":{"schema":{"type":"string","example":"Password updated!"}}}},"500":{"description":"Internal server error"}},"security":[{"bearerAuth":[]}]}}},"components":{"schemas":{"AddressRequestDTO":{"type":"object","properties":{"zipcode":{"type":"string","minLength":1},"street":{"type":"string","minLength":1},"number":{"type":"integer","format":"int32"},"complement":{"type":"string"},"neighborhood":{"type":"string","minLength":1},"city":{"type":"string","minLength":1},"state":{"type":"string","maxLength":2,"minLength":2}},"required":["number"]},"UpdateUserDTO":{"type":"object","properties":{"name":{"type":"string","minLength":1},"email":{"type":"string","minLength":1},"login":{"type":"string","minLength":1},"address":{"type":"array","items":{"$ref":"#/components/schemas/AddressRequestDTO"},"minItems":1}}},"AddressResponseDTO":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"zipcode":{"type":"string"},"street":{"type":"string"},"number":{"type":"integer","format":"int32"},"complement":{"type":"string"},"neighborhood":{"type":"string"},"city":{"type":"string"},"state":{"type":"string"},"userId":{"type":"string"}}},"UsersResponseDTO":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"email":{"type":"string"},"login":{"type":"string"},"role":{"type":"string"},"address":{"type":"array","items":{"$ref":"#/components/schemas/AddressResponseDTO"}}}},"UsersRequestDTO":{"type":"object","properties":{"name":{"type":"string","minLength":1},"email":{"type":"string","minLength":1},"login":{"type":"string","minLength":1},"password":{"type":"string","minLength":1},"role":{"type":"string","minLength":1,"pattern":"OWNER|CLIENT"},"address":{"type":"array","items":{"$ref":"#/components/schemas/AddressRequestDTO"},"minItems":1}}},"CreateUserDTO":{"type":"object","properties":{"user":{"$ref":"#/components/schemas/UsersResponseDTO"},"tokenJWT":{"type":"string"}}},"AuthenticationDataDTO":{"type":"object","properties":{"login":{"type":"string"},"password":{"type":"string"}}},"TokenJWTInfoDTO":{"type":"object","properties":{"tokenJWT":{"type":"string"}}},"ChangePasswordRequestDTO":{"type":"object","properties":{"oldPassword":{"type":"string","minLength":1},"newPassword":{"type":"string","minLength":1}}}},"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}}}}
